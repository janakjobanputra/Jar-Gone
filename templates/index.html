<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="/static/img/favicon.png">
    <title> JarGone Portal </title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    <meta name="description" content="Developed By M Abdur Rokib Promy">
    <meta name="keywords" content="Admin, Bootstrap 3, Template, Theme, Responsive">
    <!-- bootstrap 3.0.2 -->
    <link href="./static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- font Awesome -->
    <link href="./static/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons -->
    <link href="./static/css/ionicons.min.css" rel="stylesheet" type="text/css" />
    <!-- Morris chart -->
    <link href="./static/css/morris/morris.css" rel="stylesheet" type="text/css" />
    <!-- jvectormap -->
    <link href="./static/css/jvectormap/jquery-jvectormap-1.2.2.css" rel="stylesheet" type="text/css" />
    <!-- Date Picker -->
    <link href="./static/css/datepicker/datepicker3.css" rel="stylesheet" type="text/css" />
    <!-- fullCalendar -->
    <!-- <link href="css/fullcalendar/fullcalendar.css" rel="stylesheet" type="text/css" /> -->
    <!-- Daterange picker -->
    <link href="./static/css/daterangepicker/daterangepicker-bs3.css" rel="stylesheet" type="text/css" />
    <!-- iCheck for checkboxes and radio inputs -->
    <link href="./static/css/iCheck/all.css" rel="stylesheet" type="text/css" />
    <!-- bootstrap wysihtml5 - text editor -->
    <!-- <link href="css/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css" rel="stylesheet" type="text/css" /> -->
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'/>
    <!-- Theme style -->
    <link href="./static/css/style.css" rel="stylesheet" type="text/css" />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
          <![endif]-->

          <style type="text/css">

          </style>
      </head>
      <body class="skin-black">
        <!-- header logo: style can be found in header.less -->
        <header class="header">
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <div class="navbar-left">
                  <span class="heading"> After Visit Summary </span>
                </div>
                <div class="navbar-right">
                    <span class="name"> Jar-Jar Gone &nbsp;&nbsp;&nbsp; ID: 6244825472 </span>
                </div>
            </nav>
        </header>
                <div class="wrapper row-offcanvas row-offcanvas-left">
                    <!-- Left side column. contains the logo and sidebar -->

                <!-- Main content -->
                <section class="content">
                    <div class = "row">
                        <p>&nbsp;</p>
                    </div>
                    <div class="row">
                    <div class = "col-md-1"> </div>
                    <div class = "col-md-10">
                      <section class="panel">
                        <header class="panel-heading" style = "padding: 5px">
                          <b>Important</b>
                        </header>
                        <div class="panel-body">
                            <li id="list0">  </li>
                            <li id="list1">  </li>
                            <li id="list2">  </li>
                        </div>
                    </section>
                </div>
                    </div>
                </section>

                <section class="content">

                    <div class="row" style = "margin-bottom: 5px">
                        <div class = "col-md-1"></div>
                        <div class = "col-md-5">
                            <section class="panel">
                                <header class="panel-heading" style = "padding: 10px">
                                    <b>Appointment Information</b>
                                </header>
                                <div class="panel-body">
                                    <div class = "col-md-3">
                                        Provider:
                                        Department:
                                        Dpt Phone:
                                    </div>
                                    <div class = "col-md-3">
                                        Dr. M Smith
                                        Dermatology
                                        (123)4567890
                                    </div>
                                </div>
                            </section>
                        </div>
                        <div class = "col-md-5">
                            <section class = "panel">
                                <header class="panel-heading" style = "padding: 10px">
                                    <b>Vital Signs</b>
                                </header>
                                <div class="panel-body">
                                    <div class = "col-md-1">
                                        Height: 
                                        Weight:
                                        BMI:
                                    </div>
                                    <div class = "col-md-2"></div>
                                    <div class = "col-md-1">
                                        5'8"
                                        152lb
                                        23.14kg/m^2
                                    </div>
                                    <div class = "col-md-2"></div>
                                </div>
                            </section>
                        </div>
                    </div>

                </section>
                    <!-- Main row -->
                    <div class="row">
                        <div class = "col-md-1"></div>
                        <div class="col-md-6">
                            <!--earning graph start-->
                            <div id="leftTable" class="mainTextBody">
                              <section class="panel">
                                  <header class="panel-heading" style = "padding: 10px">
                                      <b>Dermatology Consultation</b>
                                  </header>
                                  <div class="panel-body">
                                    <p id="routine"> </p>
                                  </div>
                              </section>
                            </div>
                                        <!--earning graph end-->

                        </div>
                        <div id="rightTable" class="col-lg-4">
                            <!--chat start-->
                          <div class="definitions">
                            <section class="panel">
                                <header id="defTitle" class="panel-heading" style = "padding: 10px">
                                    <b>Definitions</b> &nbsp;&nbsp;
                                    <button id="butD" class = "glyphicon glyphicon-chevron-down" data-toggle="collapse" data-target="#demo"> </button>
                                    <button id="butR" class="glyphicon glyphicon-chevron-right" data-toggle="collapse" data-target="#demo"> </button>
                                </header>
                                <div id="demo" class="collapse" style="max-height: 250px; overflow: scroll;">
                                    <div class="panel-body" >
                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=multiple+myeloma">
                                        <div id="def0" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=biopsy">
                                        <div id="def1" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=lymphotic+leukemia">
                                        <div id="def2" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=maturation">
                                        <div id="def3" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=melanocyte">
                                        <div id="def4" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=specimen">
                                        <div id="def5" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=cytoplasm">
                                        <div id="def6" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=rete+testis">
                                        <div id="def7" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=dermo-epidermal">
                                        <div id="def8" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                        <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=mitosis">
                                        <div id="def9" class="alert alert-success" onmouseover="hoverAction(this.innerHTML)" onmouseout="offHoverAction(this.innerHTML)"> </div></a>

                                    </div>
                                </div>
                              </section>
                          </div>
                        </div>
                    </div>

        <!-- jQuery 2.0.2 -->
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <script src="./static/js/jquery.min.js" type="text/javascript"></script>
         <!--script src="./static/js/mainScript.js" type="javascript"> </script-->

        <!-- jQuery UI 1.10.3 -->
        <script src="./static/js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
        <!-- Bootstrap -->
        <script src="./static/js/bootstrap.min.js" type="text/javascript"></script>
        <!-- daterangepicker -->
        <script src="./static/js/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>

        <script src="./static/js/plugins/chart.js" type="text/javascript"></script>

        <!-- datepicker
        <script src="./static/js/plugins/datepicker/bootstrap-datepicker.js" type="text/javascript"></script>-->
        <!-- Bootstrap WYSIHTML5
        <script src="./static/js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>-->
        <!-- iCheck -->
        <script src="./static/js/plugins/iCheck/icheck.min.js" type="text/javascript"></script>
        <!-- calendar -->
        <script src="./static/js/plugins/fullcalendar/fullcalendar.js" type="text/javascript"></script>

        <!-- Director App -->
        <script src="./static/js/Director/app.js" type="text/javascript"></script>

        <!-- Director dashboard demo (This is only for demo purposes) -->
        <script src="./static/js/Director/dashboard.js" type="text/javascript"></script>

        <!-- Director for demo purposes -->
        <script type="text/javascript">
           $(document).ready(function() {
           $("#butD").hide();
           $("#butR").click(function() {
            $('#butD').show();
             $("#butR").hide();
             //$("#defTitle").css("width","350px");
             //console.log($("#defTitle").css("width"));
            // console.log("UO");
             //$(".panel-body").fadeOut();
             //document.getElementById("leftTable").className = "col-md-11"
             //document.getElementById("rightTable").className = "col-md-1"
           });
           $("#butD").click(function() {
             $('#butR').show();
             $("#butD").hide();
             console.log($('.panel-heading').css("height"));
             //$(".panel-body").fadeOut();
             //document.getElementById("leftTable").className = "col-md-11"
            //document.getElementById("rightTable").className = "col-md-1"
           });
         //console.log("WORKING");
           //$(".glyphicon glyphicon-chevron-down")
         });
</script>


<script type="text/javascript">
//console.log("run py");

function runPyScript(input){
        $.ajax({
            type: "POST",
            url: "./scripts/annotations.py",
            async: false,
        });
    }
    //console.log("ran the py");
    var impPhrases = ["presence", "No", "no"];
    var textBlock, jsonDefns;

    $.ajax({
        type: "GET",
        url: "./static/data/test.json",
        success:function(data) {
            jsonDefns = data;
            // console.log("json", json[0].word);
            
            return data;
        },
        async: false,
    });

    $.ajax({
        type: "GET",
        url: "/getTxt",
        success:function(data) {
            textBlock = data;
            //console.log("textBlock", textBlock);
            return data;
        },
        async: false,
    });

    for(i = 0; i < jsonDefns.length; i++) {
        document.getElementById("def"+i).innerHTML = jsonDefns[i].word + " : " + jsonDefns[i].defn;
        //$("#def" + i).append("<a href = '' >" + jsonDefns[i].word + " : " + jsonDefns[i].defn + "</a>");
    }

    //console.log("textBlock outside", textBlock);

    var sentences = [];
    var currentStream = "";
    var j = 0;
    var k = 0;
    var m = 0;
    for (i = 0; i < textBlock.length; i++) {
        if(textBlock[i] == ".") {
            sentences[k] = currentStream;
            currentStream = "";
            i++;
            k++;
            continue;
        }
        else {
            currentStream += textBlock[i];
        }
    }
    // document.getElementById("routine").innerHTML = textBlock;
    j = 0;
    var newTextBlock = "";
    for(i = 0; i < sentences.length; i ++) {
        //console.log(sentences[i]);
        
        for(m = 0; m < jsonDefns.length; m++) {
            //console.log(jsonDefns[m].word);
            if((sentences[i].indexOf(jsonDefns[m].word) !== -1)) {
                var foundIndex = sentences[i].indexOf(jsonDefns[m].word);
                var temp = sentences[i].substring(0, foundIndex-1) + " <span id="+jsonDefns[m].word+"> " + sentences[i].substring(foundIndex, foundIndex + jsonDefns[m].word.length) + " </span> " + sentences[i].substring(foundIndex + jsonDefns[m].word.length + 1, sentences[i].length);
                //console.log(temp);
                sentences[i] = temp;
            }          
        }
        // if((sentences[i].indexOf(jsonDefns[m].word) !== -1)) {
        //     var foundIndex = sentences[i].indexOf(jsonDefns[m].word);
        //     var temp = sentences[i].substring(0, foundIndex-1) + "<b>" + sentences[i].substring(foundIndex, foundIndex + jsonDefns[m].word.length) + "</b>" + sentences[i].substring(foundIndex + jsonDefns[m].word.length + 1, sentences[i].length);
        //     console.log(temp);
        //     m = 0;
        //     i = 0;
        // }
        // else {
        //     m++;
        //     i = i - 1;
        //     console.log("nothing");
        // }
        newTextBlock += sentences[i] + " ";  
    }
    for (i = 0; i < sentences.length && j < impPhrases.length; i++) {

        if(sentences[i].indexOf(impPhrases[j]) !== -1) {

            document.getElementById("list"+j).innerHTML = sentences[i];
            j++;
            i = -1;
        }
    }

    $('#routine').append(newTextBlock);
            // Chart.defaults.global.responsive = true;
</script>

<script type="text/javascript">
function hoverAction(word) {
    var splitting;
    splitting = word.split(":");
    console.log("splitting on", splitting);
    var id = "#"+splitting[0];
    $(id).css("font-weight", "bold");
    //console.log(splitting[0]);
}

function offHoverAction(word) {
    var splitting;
    splitting = word.split(":");
    console.log("splitting off", splitting);
    var id = "#"+splitting[0];
    $(id).css("font-weight", "");
}
</script>
</body>
</html>
